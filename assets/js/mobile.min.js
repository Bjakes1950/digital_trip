/* Created by deemidroll | deemidroll@gmail.com | 2014 */
$(function(){function a(a){l=!0,$("#forward").css("transform","rotate("+a+"deg)"),d>a?($("#stopRight, #turnRight").removeClass("active"),a>e?$("#stopLeft").addClass("active"):$("#turnLeft").addClass("active")):a>f?($("#stopLeft, #turnLeft").removeClass("active"),g>a?$("#stopRight").addClass("active"):$("#turnRight").addClass("active")):$("#stopLeft, #turnLeft, #stopRight, #turnRight").removeClass("active")}var b=window.location.origin,c=window.location.hash,d=-3,e=-20,f=3,g=20,h=$("#controller"),i=$("#gameCodeInput"),j=$("#wheel"),k=$("#status"),l=!1;h.show();var m=function(c){socket=io.connect(b),socket.on("welcome",function(){socket.emit("device",{type:"controller",gameCode:c})}),socket.on("message",function(a){"vibr"===a.type&&navigator.vibrate(a.time),"gameover"===a.type&&(h.hide(),$("#gameover").show()),"resetGame"===a.type&&($("#gameover").hide(),h.show())}),$("#audioloop").trigger("play"),socket.on("connected",function(){$("#socket").hide(),$("#preparetostart").show(),$("#start").click(function(){socket.emit("start",{}),$(this).unbind("click"),$("#preparetostart").hide(),j.show()}),document.addEventListener("touchstart",function(){socket.emit("accelerate",{accelerate:!0}),$("#forward").addClass("active")},!1),document.addEventListener("touchend",function(){socket.emit("accelerate",{accelerate:!1}),$("#forward").removeClass("active")},!1),document.addEventListener("touchmove",function(a){a.preventDefault()},!1),window.addEventListener("deviceorientation",function(b){var c=b.alpha,d=b.beta,e=(b.gamma,d);a(e),socket.emit("turn",{turn:e,g:c})},!1),window.addEventListener("MozOrientation",function(b){var c=b.alpha,d=b.beta,e=(b.gamma,d);a(e),socket.emit("turn",{turn:e,g:c})},!1),l||($("#turnLeft").click(function(){socket.emit("click",{click:"left"})}),$("#turnRight").click(function(){socket.emit("click",{click:"right"})})),$(".button").show(),$("#restart").click(function(){socket.emit("click",{click:"restart"}),$("#gameover").hide(),h.show()})}),socket.on("fail",function(){k.html("Failed to connect! Reload!")}),$(document).unbind("keyup",n)};c&&m(c.slice(1));var n=function(a){var b=a.keyCode;13===b&&m(i.val())};$("#connect").click(function(){m(i.val())}),$(document).bind("keyup",n)});
//# sourceMappingURL=mobile.min.map