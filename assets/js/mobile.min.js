/* Created by deemidroll | deemidroll@gmail.com | 2014 */
$(function(){var a=window.location.origin,b=window.location.hash,c=($("#controller"),$("#gameCodeInput")),d=$("#wheel"),e=$("#gameover"),f=$("#preparetostart"),g=$("#status"),h=function(a){var b=document.createElement("div");a="on"+a;var c=a in b;return c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]),b=null,c},i=function(b){socket=io.connect(a),socket.on("welcome",function(){socket.emit("device",{type:"controller",gameCode:b})}),socket.on("message",function(a){"vibr"===a.type&&navigator.vibrate(a.time),"gameover"===a.type&&(d.css({display:"none"}),e.css({display:"table-cell"})),"resetGame"===a.type&&(e.css({display:"none"}),d.css({display:"table-cell"}))}),socket.on("connected",function(){function a(a){var b,c=a.alpha,d=a.beta,e=a.gamma,f=window.orientation;0===f&&(b=e),90===f&&(b=d),-90===f&&(b=-d),socket.emit("turn",{turn:b,g:c})}function b(){var a=h("touchstart")?"touchstart":"click";$("#btnLeft").on(a,function(){socket.emit("click",{click:"toTheLeft"})}),$("#btnRight").on(a,function(){socket.emit("click",{click:"toTheRight"})})}$("#socket").css({display:"none"}),f.css({display:"table-cell"}),$("#start").click(function(){socket.emit("start",{}),$(this).unbind("click"),f.css({display:"none"}),d.css({display:"table-cell"}),$("#audioloop").trigger("play")}),document.addEventListener("touchmove",function(a){a.preventDefault()},!1),"ondeviceorientation"in window?(window.addEventListener("deviceorientation",a,!1),g.html("tilt your device to control")):"ondeviceorientation"in window?(window.addEventListener("MozOrientation",a,!1),g.html("tilt your device to control")):(b(),g.html("push buttons to control")),$("#btnSphere").on("touchstart",function(){socket.emit("click",{click:"pause"}),$("#audioloop").trigger("play")}),$("#restart").click(function(){socket.emit("click",{click:"restart"}),e.css({display:"none"}),d.css({display:"table-cell"}),$("#audioloop").trigger("play")})}),socket.on("fail",function(){$("#status_fail").html("Failed to connect! Check address and code and reload!")}),$(document).unbind("keyup",j)};b&&(i(b.slice(1)),$("#socket").hide());var j=function(a){var b=a.keyCode;13===b&&i(c.val())};$("#connect").click(function(){i(c.val())}),$(document).bind("keyup",j)});
//# sourceMappingURL=mobile.min.map