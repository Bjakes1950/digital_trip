/* Created by deemidroll | deemidroll@gmail.com | 2014 */
$(function(){var a=window.location.origin,b=window.location.hash,c=$("#controller"),d=$("#gameCodeInput"),e=$("#wheel"),f=$("#status"),g=!1;c.show();var h=function(b){socket=io.connect(a),socket.on("welcome",function(){socket.emit("device",{type:"controller",gameCode:b})}),socket.on("message",function(a){"vibr"===a.type&&navigator.vibrate(a.time),"gameover"===a.type&&(e.hide(),$("#gameover").show()),"resetGame"===a.type&&($("#gameover").hide(),e.show())}),socket.on("connected",function(){function a(a){var b,c=a.alpha,d=a.beta,e=a.gamma,f=window.orientation;0===f&&(b=e),90===f&&(b=d),-90===f&&(b=-d),g||(g=!0),socket.emit("turn",{turn:b,g:c})}$("#socket").hide(),$("#preparetostart").show(),$("#start").click(function(){socket.emit("start",{}),$(this).unbind("click"),$("#preparetostart").hide(),e.show(),$("#audioloop").trigger("play")}),document.addEventListener("touchstart",function(){socket.emit("accelerate",{accelerate:!0}),$("#forward").addClass("active")},!1),document.addEventListener("touchend",function(){socket.emit("accelerate",{accelerate:!1}),$("#forward").removeClass("active")},!1),document.addEventListener("touchmove",function(a){a.preventDefault()},!1),window.addEventListener("deviceorientation",a,!1),window.addEventListener("MozOrientation",a,!1),setTimeout(function(){g||($("#turnLeft").on("touchstart",function(){socket.emit("click",{click:"toTheLeft"})}),$("#turnRight").on("touchstart",function(){socket.emit("click",{click:"toTheRight"})}))},1e3),$("#sphere").on("touchstart",function(){socket.emit("click",{click:"pause"})}),$("#restart").click(function(){socket.emit("click",{click:"restart"}),$("#gameover").hide(),e.show(),$("#audioloop").trigger("play")})}),socket.on("fail",function(){f.html("Failed to connect! Reload!")}),$(document).unbind("keyup",i)};b&&h(b.slice(1));var i=function(a){var b=a.keyCode;13===b&&h(d.val())};$("#connect").click(function(){h(d.val())}),$(document).bind("keyup",i)});
//# sourceMappingURL=mobile.min.map