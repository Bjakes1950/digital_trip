/* Created by deemidroll | deemidroll@gmail.com | 2014 */
$(function(){function a(){i||(i=!0),window.removeEventListener("deviceorientation",a,!1),window.removeEventListener("MozOrientation",a,!1)}var b=window.location.origin,c=window.location.hash,d=($("#controller"),$("#gameCodeInput")),e=$("#wheel"),f=$("#gameover"),g=$("#preparetostart"),h=$("#status"),i=!1;if(/iP(ad|od|hone)|Android|Blackberry|Windows Phone/i.test(navigator.userAgent)){window.addEventListener("deviceorientation",a,!1),window.addEventListener("MozOrientation",a,!1),setTimeout(function(){i?h.html("tilt your device to control"):($("#btnLeft").on("touchstart",function(){socket.emit("click",{click:"toTheLeft"})}),$("#btnRight").on("touchstart",function(){socket.emit("click",{click:"toTheRight"})}),h.html("push buttons to control"))},1e3);var j=function(a){socket=io.connect(b),socket.on("welcome",function(){socket.emit("device",{type:"controller",gameCode:a})}),socket.on("message",function(a){"vibr"===a.type&&navigator.vibrate(a.time),"gameover"===a.type&&(e.css({display:"none"}),f.css({display:"table-cell"})),"resetGame"===a.type&&(f.css({display:"none"}),e.css({display:"table-cell"}))}),socket.on("connected",function(){function a(a){var b,c=a.alpha,d=a.beta,e=a.gamma,f=window.orientation;0===f&&(b=e),90===f&&(b=d),-90===f&&(b=-d),socket.emit("turn",{turn:b,g:c})}$("#socket").css({display:"none"}),g.css({display:"table-cell"}),$("#start").click(function(){socket.emit("start",{}),$(this).unbind("click"),g.css({display:"none"}),e.css({display:"table-cell"}),$("#audioloop").trigger("play")}),document.addEventListener("touchmove",function(a){a.preventDefault()},!1),window.addEventListener("deviceorientation",a,!1),window.addEventListener("MozOrientation",a,!1),$("#btnSphere").on("touchstart",function(){socket.emit("click",{click:"pause"}),$("#audioloop").trigger("play")}),$("#restart").click(function(){socket.emit("click",{click:"restart"}),f.css({display:"none"}),e.css({display:"table-cell"}),$("#audioloop").trigger("play")})}),socket.on("fail",function(){h.html("Failed to connect! Reload!")}),$(document).unbind("keyup",k)};c&&j(c.slice(1));var k=function(a){var b=a.keyCode;13===b&&j(d.val())};$("#connect").click(function(){j(d.val())}),$(document).bind("keyup",k)}});
//# sourceMappingURL=mobile.min.map